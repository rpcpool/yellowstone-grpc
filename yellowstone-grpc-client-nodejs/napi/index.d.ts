/* auto-generated by NAPI-RS */
/* eslint-disable */
/**
 * DuplexStream Engine
 *
 * The inner engine for a custom implementation of stream.Duplex
 * on the JS runtime.
 *
 * This is not meant to be directly interacted with by the user
 * rather an underlying stream implementation where stream.Duplex
 * will `_read()` from and `_write()` to.
 */
export declare class DuplexStream {
  /**
   * Creates a new DuplexStream Engine.
   *
   * This constructor does the following:
   * 1. Initialize crypto provider.
   * 2. Process channel options.
   * 3. Initialize channels.
   * 4. Spawn the worker receiving requests and updates.
   * 5. Create the instance of DuplexStream Engine.
   */
  constructor(endpoint: string, xToken?: string | undefined | null, channelOptions?: object | undefined | null)
  /**
   * Read JS Accesspoint.
   *
   * Retrieve one SubscribeUpdate from the worker.
   */
  read(): Promise<object>
  /**
   * Write JS Accesspoint.
   *
   * Take in SubscribeRequest and send to the worker.
   */
  write(chunk: object): void
}

/**
 * Main client struct exposed to JavaScript via NAPI.
 *
 * The client maintains a persistent gRPC connection that is created once
 * in the constructor and reused for all subsequent operations.
 */
export declare class GrpcClient {
  /**
   * Creates a new gRPC client and establishes a connection.
   *
   * This is an async factory method that:
   * 1. Initializes the crypto provider (required for TLS)
   * 2. Builds the client with the provided configuration
   * 3. Establishes the gRPC connection
   * 4. Wraps the client for safe concurrent access
   *
   * The connection is persistent and will be reused for all subsequent operations.
   */
  static new(endpoint: string, xToken?: string | undefined | null, channelOptions?: JsChannelOptions | undefined | null): Promise<GrpcClient>
  /**
   * Gets the latest blockhash from the Solana cluster.
   *
   * This method:
   * 1. Accepts a JavaScript-compatible request object
   * 2. Converts the request to protobuf format
   * 3. Downcasts the holder to the concrete type
   * 4. Delegates to the holder's method
   * 5. Converts the protobuf response back to JavaScript-compatible format
   * 6. Returns the full response including blockhash and last valid block height
   */
  getLatestBlockhash(request: JsGetLatestBlockhashRequest): Promise<JsGetLatestBlockhashResponse>
}

/**
 * ChannelOptions from JS.
 *
 * Struct to hold the channel options configuration
 * passed from JS.
 *
 * Note:
 * The type u32 is being used because of napi's built-in
 * support for u32 to number (JS) conversion.
 */
export interface JsChannelOptions {
  grpcConnectTimeout?: number
  grpcBufferSize?: number
  grpcHttp2KeepAliveInterval?: number
  grpcInitialConnectionWindowSize?: number
  grpcInitialStreamWindowSize?: number
  grpcKeepAliveTimeout?: number
  grpcTcpKeepalive?: number
  grpcTimeout?: number
  grpcMaxDecodingMessageSize?: number
  grpcMaxEncodingMessageSize?: number
  grpcDefaultCompressionAlgorithm?: JsCompressionAlgorithm
  grpcSetXRequestSnapshot?: boolean
  grpcHttp2AdaptiveWindow?: boolean
  grpcKeepAliveWhileIdle?: boolean
  grpcTcpNodelay?: boolean
}

export declare const enum JsCompressionAlgorithm {
  Gzip = 0,
  Zstd = 1
}

export interface JsGetLatestBlockhashRequest {
  commitment?: number
}

export interface JsGetLatestBlockhashResponse {
  blockhash: string
  lastValidBlockHeight: string
}
